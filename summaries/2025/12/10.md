# Activity Summary for 10/12/2025

## 09:15:41
The `package.json` file for the `hrdirect-mcs-api` project, last modified at 09/12/2025, 13:02:01, outlines a Node.js REST API using an MCS (Model-Controller-Services) architecture. It specifies Node.js version 14.18.0 and npm >=6.14.15. The script section defines commands for starting the application in different environments (production, staging, dev) using `pm2` and `nodemon`, as well as commands for testing with `jest` (including coverage and watch modes), linting with `eslint`, formatting with `prettier`, and Docker orchestration (`docker-compose`). A wide array of dependencies are listed, including `@aws-sdk/client-s3`, `@azure/msal-node`, `bullmq`, `express`, `mongoose`, `jsonwebtoken`, `passport`, `nodemailer`, `socket.io`, `swagger-jsdoc`, `xlsx`, and various internal `@nathangroup` modules for HR functionalities like `apm`, `attendance`, `claim`, `leave`, `letter`, `payroll`, `ssomatrix`, and `wfh`. Development dependencies include `eslint`, `jest`, `nodemon`, `prettier`, and `supertest`.

The `/Users/collin/projects/hrms/hrdirect-admin/components/Bell.vue` component, responsible for displaying user notifications, underwent several saves/updates between 09/12/2025, 13:57:14 and 14:59:44.
- **Initial State (09/12/2025, 13:57:14 to 14:00:58):** The component provides a `v-menu` for a notification dropdown, showing a `v-badge` with the count of unread notifications. It lists unread notifications with an avatar, type, text, and date. Functionality includes marking all unread as read, infinite scrolling to load more, and routing to specific pages (`openUrl` method) when a notification is clicked. Navigation handles "Social notification" types by directing to `/user/home#social` with a `story_id`, and other types by navigating to a URL provided in the notification data, potentially adding `requestId` and `requestType` as query parameters.
- **Update (09/12/2025, 14:47:46):** The `openUrl` method was enhanced to include logic for correcting navigation hashes. It now maps old, non-existent tab hashes (e.g., 'leave', 'wfh', 'claim', 'attendance', 'lieu') to a generic 'requests' hash to ensure correct routing within the application. A `console.log` statement was added to debug notification click navigation.
- **Subsequent Saves (09/12/2025, 14:57:01 to 14:59:44):** The content of `Bell.vue` remained identical across these timestamps, indicating no further code changes were committed during this period.

The `/Users/collin/projects/hrms/hrdirect-mcs-api/src/services/leave_request.service.js` file, last seen at 09/12/2025, 14:28:19 and 15:00:29 (identical content), defines the backend logic for creating leave requests. This service handles:
- Retrieving user, manager, and approval flow data.
- Complex approval logic, including dynamic assignment of line/senior managers and deduplication of approvers to calculate required approval numbers.
- Validation of leave types, balances, and half-day eligibility.
- Integration with `@nathangroup/leave` for leave request creation.
- Management of `air_ticket` details for Annual Leaves.
- Calculation of `leave_salary_amount`.
- Logic for "Auto Approved" leaves where an approver has a substitute.

Similarly, the `/Users/collin/projects/hrms/hrdirect-mcs-api/src/services/wfh_request.service.js` file, last seen at 09/12/2025, 15:01:35 and 15:11:37 (identical content), manages Work From Home (WFH) requests. Key features include:
- Support for recurring WFH requests by generating multiple single requests.
- Fetching applicant, manager, and approval flow details.
- Dynamic approval logic, mirroring the leave request service, for assigning and deduplicating approvers.
- Integration with `@nathangroup/wfh` for WFH request creation.
- Saving WFH requests and managing an application log.
- Sending system notifications and emails to users and approvers upon request submission.
- A `withdrawWfhRequest` function to handle the withdrawal of WFH requests, updating statuses and sending relevant notifications/emails.

**Patterns and Recurring Elements:**
All changes occurred on 09/12/2025, indicating focused development activity on that day. There were numerous consecutive log entries for `Bell.vue` and the service files (`leave_request.service.js`, `wfh_request.service.js`) with identical content. This suggests frequent saving or committing without significant functional changes between these specific timestamps, except for one notable update in `Bell.vue` at 14:47:46. A strong pattern across both frontend and backend is the robust implementation of notification systems and multi-level approval workflows, including dynamic approver assignment and handling of "auto-approved" scenarios. The project leverages internal `@nathangroup` libraries, pointing to a modular and component-based development strategy for core HR functionalities. The system integrates frontend (Vue.js) and backend (Node.js) components extensively for features like notifications and request management.

## 11:14:30
The provided log contains a single entry for the file `/Users/collin/projects/ngex/ngex-api/.env`. As per the instructions, a summary for `.env` files or files containing keys will not be generated.

## 12:14:45
The provided log details changes across two main files within a project, primarily focusing on administrative leave management and general request handling, with one `.env` file update.

The file `/Users/collin/projects/ngex/ngex-api/.env` was modified at `10/12/2025, 10:58:20`. This file contains environment variables, including database URLs, AWS credentials, API keys (e.g., SendGrid, GPT), and other configuration settings. Due to the sensitive nature of its contents, a detailed summary of its code changes is omitted.

The primary focus of the changes is on the `/Users/collin/projects/ngex/ngex-admin/components/reuseable/createLeaves.vue` component, which saw multiple updates between `10/12/2025, 11:22:27` and `10/12/2025, 12:13:30`.
Initially, the component handles the creation of leave requests, displaying leave counts (days, remaining, unpaid overflow), sick leave breakdown, and fields for leave type, half-day options, start/end dates, document uploads, leave buddy selection, and reason.
Significant updates to `createLeaves.vue` include:
*   **Air Ticket Feature (post 12:05:26, confirmed by 12:12:00):** The `leave` data object in the script was extended to include `air_ticket`, `departure` (with `country` and `airport`), `arrival` (with `country` and `airport`), and `travel_date` fields. This indicates the introduction of functionality to manage air ticket details for annual leave requests.
*   **Minor UI Adjustment (between 12:05:26 and 12:12:00):** The `<p>` tag displaying the label "Leave Type" (`{{ $t("myhr.myhr_leave_type") }}`) was removed from the template section for the `v-select` associated with `leave.leave_type`. The required field asterisk (`<span class="red--text">*</span>`) remains.

The file `/Users/collin/projects/ngex/ngex-admin/components/admin-central/requests.vue` was updated at `10/12/2025, 11:25:44`. This component is responsible for managing various request types within an admin panel. It displays a list of all requests (pending or historical) and allows administrators to create new requests. The component dynamically renders sub-components based on the `requestType` selected, supporting:
*   Mobilization Request
*   Create Leaves (using the `CreateLeaves` component)
*   Create Time Off Lieu
*   Create Loan
*   Create WFH (Work From Home)
*   Create Salary Advance
*   Create Overtime
*   New Claim Request
*   Attendance (with date picker and `EditAttendance` component)
*   Create Salary Adjustment
*   Create Trip Request
*   Letter Request (with extensive options for letter generation)
*   Create Grade Change Request
*   Create Designation Change Request
*   Bank Details Request
*   Create Passport Safekeep

**Patterns and Recurring Elements:**
*   **Vuetify Framework:** Both `.vue` files heavily utilize Vuetify components (e.g., `v-container`, `v-row`, `v-col`, `v-card`, `v-select`, `v-date-picker`, `v-btn`, `v-alert`, `v-progress-circular`) for consistent UI.
*   **Internationalization:** The `$t("key")` syntax is frequently used throughout the templates, indicating support for multiple languages.
*   **Dynamic Component Loading:** The `requests.vue` component demonstrates a pattern of dynamically loading child components (`v-if`) based on the selected `requestType`, centralizing request management.
*   **Form Validation:** Components include form validation rules (e.g., `genericRule`, `fileRules`) and progress indicators (`v-progress-circular`, `newLeaveProgress`, `loadingLeaveTypes`) for user feedback during submission.
*   **User/Employee Context:** Components often pass `selectedEmp`, `userType`, `user`, `configuration`, and `companyData` props, suggesting a system with user roles and company-specific configurations.
*   **Frequent Commits/Saves:** The numerous, closely timed entries for `createLeaves.vue` with largely identical code suggest a development workflow that involves frequent saving, possibly during active development or minor refactoring sessions.