# Activity Summary for 27/11/2025

## 10:00:49
The log primarily details the state of a single file, `/Users/collin/projects/ccl_pms/frontend/src/api/client.ts`, at multiple timestamps.

**File-specific updates:**
The file `/Users/collin/projects/ccl_pms/frontend/src/api/client.ts` appears three times in the log, with identical content in each entry. This suggests no code changes were made to this file during the logged period, but rather its state was recorded consistently.

**Timestamps of significant changes:**
The file's content was logged on 27/11/2025 at 09:13:17, 09:13:34, and 09:13:48. While no code modifications are evident, these timestamps mark points where the file's consistent state was recorded.

**Patterns or recurring elements in the content:**
The recurring content for `/Users/collin/projects/ccl_pms/frontend/src/api/client.ts` establishes an Axios client for API communication. Key elements and patterns include:
*   **Base URL Configuration**: The API client's `baseURL` is dynamically set using `import.meta.env.VITE_API_URL`, falling back to `http://localhost:5001/api` if the environment variable is not defined.
*   **Request Interceptor**: A request interceptor automatically adds an `X-SSO-Token` header to outgoing requests. It retrieves this token from `localStorage` (`pms_sso_token`) but only if the header isn't already set, preventing overwrites.
*   **Response Interceptor**:
    *   On successful responses, it directly returns `response.data`.
    *   On error, it logs the API error and includes specific handling for `401 Unauthorized` responses.
    *   **Unauthorized Handling**: For 401 errors, it clears `pms_sso_token` and `pms_user` from `localStorage`.
    *   **Redirection Logic**: It attempts to redirect the user to a specified HRMS URL (`/dashboards/mywork`) using `import.meta.env.VITE_HRMS_URL` (defaulting to `http://localhost:5102`), unless the application is in development mode (`import.meta.env.MODE === 'development'`) or the current path is `/auth/sso`. In development, a warning is logged instead of a redirect.
*   **Environment Variables**: The use of `import.meta.env` for API URL, HRMS URL, and environment mode is a consistent pattern for configuration.
*   **Error Handling**: Centralized error logging and rejection of the error promise with `error.response?.data || error.message`.